/*==================================================================================================

    Module Name:  fpga_rx.c

    General Description: Implements the FPGA rx driver interface

====================================================================================================

====================================================================================================
                                           INCLUDE FILES
==================================================================================================*/
#include <string.h>
#include <stdio.h>
#include <errno.h>
#include "mem_map.h"
#include "jspec/ingot.h"
#include "fpga_drv.h"
#include "fpga_rx.h"

/*==================================================================================================
                                          LOCAL CONSTANTS
==================================================================================================*/
#define RX_RING_MASK (RX_DESCRIPTOR_COUNT - 1)

/*==================================================================================================
                                           LOCAL MACROS
==================================================================================================*/

/*==================================================================================================
                            LOCAL TYPEDEFS (STRUCTURES, UNIONS, ENUMS)
==================================================================================================*/

/*==================================================================================================
                                     LOCAL FUNCTION PROTOTYPES
==================================================================================================*/

/*==================================================================================================
                                         GLOBAL VARIABLES
==================================================================================================*/

/*==================================================================================================
                                          LOCAL VARIABLES
==================================================================================================*/
static volatile uint32_t tx_head = 0;

/*==================================================================================================
                                         GLOBAL FUNCTIONS
==================================================================================================*/

/*=============================================================================================*//**
@brief init the FPGA rx driver
*//*==============================================================================================*/
void fpga_rx_init()
{
    phys_addr_t phys_base = global_mem->phys_addr;

    ingot_reg->tx_desc_base = phys_base + TX_DESCRIPTOR_OFFSET;
    ingot_reg->tx_buf_base  = phys_base + TX_MBUF_OFFSET;

    memset(global_mem->base + TX_DESCRIPTOR_OFFSET, 0, TX_DESCRIPTOR_SIZE);
}

/*=============================================================================================*//**
@brief receive a packet from specified port.

@param[in] port - on which port to receive packet
@param[in] buf  - the buffer contains the packet
@param[in] len  - packet buffer length

@return 0 if success
*//*==============================================================================================*/
int fpga_rx(int port, void* buf, size_t len)
{
   

    return 0;
}

/*==================================================================================================
                                          LOCAL FUNCTIONS
==================================================================================================*/

