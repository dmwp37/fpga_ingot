#ifndef _MBUF_H_
#define _MBUF_H_
/*==================================================================================================

    Module Name:  mbuf.h

    General Description: This file provides mbuf malloc interface

====================================================================================================

====================================================================================================
                                           INCLUDE FILES
==================================================================================================*/
#include "hp_malloc.h"
#include "rte/rte_ring.h"

#ifdef __cplusplus
extern "C" {
#endif

/*==================================================================================================
                                              MACROS
==================================================================================================*/
#define MBUF_SIZE 2048 /* 2k mbuf */

/*==================================================================================================
                                               ENUMS
==================================================================================================*/

/*==================================================================================================
                                   STRUCTURES AND OTHER TYPEDEFS
==================================================================================================*/
typedef struct
{
    struct rte_ring* p_ring;
    hp_t*            p_hp;
    void*            mbuf_base;
} mbuf_pool_t;

/*==================================================================================================
                                   GLOBAL VARIABLE DECLARATIONS
==================================================================================================*/

/*==================================================================================================
                                        FUNCTION PROTOTYPES
==================================================================================================*/
mbuf_pool_t* mbuf_pool_alloc(unsigned count);
void         mbuf_pool_free(mbuf_pool_t* pool);

void* mbuf_get(mbuf_pool_t* pool);
void  mbuf_put(mbuf_pool_t* pool, void* mbuf);

#ifdef __cplusplus
}
#endif

/** @} */
/** @} */

#endif /* _MBUF_H_  */

